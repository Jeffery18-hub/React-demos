{"ast":null,"code":"const Storage = cartItems => {\n  localStorage.setItem('cartItems', JSON.stringify(cartItems.length > 0 ? cartItems : []));\n};\n_c = Storage;\nexport const CartReducer = (state, action) => {\n  let index = -1;\n  if (action.payload) {\n    index = state.cartItems.findIndex(p => p.id === action.payload.id);\n  }\n  let newItems = [...state.cartItems]; // copy state\n\n  switch (action.type) {\n    case 'ADD_TO_CART':\n    case 'INCQTY':\n      if (index === -1) {\n        // state.cartItems.push({ ...action.payload, quantity: 1 }); bad way to modify the state\n        newItems.push({\n          ...action.payload,\n          quantity: 1\n        });\n      } else {\n        // state.cartItems[index].quantity++;\n        newItems[index].quantity++;\n      }\n      break;\n    case 'REMOVE_FROM_CART':\n      if (index > -1) {\n        // state.cartItems.splice(index, 1);\n        newItems = state.cartItems.filter(p => p.id !== action.payload.id);\n      }\n      break;\n    case 'DECQTY':\n      if (index > -1) {\n        // state.cartItems[index].quantity--;\n        if (newItems[index].quantity >= 1) {\n          newItems[index].quantity--;\n        }\n      }\n      break;\n    case 'CLEAR_CART':\n      newItems = [];\n      break;\n    default:\n      break;\n  }\n  state.cartItems = newItems;\n  Storage(state.cartItems);\n  return state;\n};\n_c2 = CartReducer;\nvar _c, _c2;\n$RefreshReg$(_c, \"Storage\");\n$RefreshReg$(_c2, \"CartReducer\");","map":{"version":3,"names":["Storage","cartItems","localStorage","setItem","JSON","stringify","length","_c","CartReducer","state","action","index","payload","findIndex","p","id","newItems","type","push","quantity","filter","_c2","$RefreshReg$"],"sources":["/Users/tacodaddy/learnReact/e-store/src/contexts/cartReducer.js"],"sourcesContent":["const Storage = (cartItems)=> {\n    localStorage.setItem('cartItems', JSON.stringify(cartItems.length>0 ? cartItems : []));\n}\n\n\nexport const CartReducer = (state, action) => {\n    let index = -1;\n    if (action.payload) {\n        index = state.cartItems.findIndex(p => p.id === action.payload.id);\n    }\n\n    let newItems = [...state.cartItems]; // copy state\n\n    switch (action.type) {\n        case 'ADD_TO_CART':\n        case 'INCQTY':\n            if (index === -1) {\n                // state.cartItems.push({ ...action.payload, quantity: 1 }); bad way to modify the state\n                newItems.push({ ...action.payload, quantity: 1 });\n\n            } else {\n                // state.cartItems[index].quantity++;\n                newItems[index].quantity++;\n\n            }\n            break;\n\n        case 'REMOVE_FROM_CART':\n            if (index > -1) {\n                // state.cartItems.splice(index, 1);\n                newItems = state.cartItems.filter(p => p.id !== action.payload.id);\n            }\n            break;\n\n        case 'DECQTY':\n            if (index > -1) {\n                // state.cartItems[index].quantity--;\n                if (newItems[index].quantity >= 1){\n                    newItems[index].quantity--;\n                }\n            }\n            break;\n\n        case 'CLEAR_CART':\n            newItems = [];\n            break;\n\n        default:\n            break;\n    }\n    state.cartItems = newItems;\n    Storage(state.cartItems);\n    return state;\n}"],"mappings":"AAAA,MAAMA,OAAO,GAAIC,SAAS,IAAI;EAC1BC,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACJ,SAAS,CAACK,MAAM,GAAC,CAAC,GAAGL,SAAS,GAAG,EAAE,CAAC,CAAC;AAC1F,CAAC;AAAAM,EAAA,GAFKP,OAAO;AAKb,OAAO,MAAMQ,WAAW,GAAGA,CAACC,KAAK,EAAEC,MAAM,KAAK;EAC1C,IAAIC,KAAK,GAAG,CAAC,CAAC;EACd,IAAID,MAAM,CAACE,OAAO,EAAE;IAChBD,KAAK,GAAGF,KAAK,CAACR,SAAS,CAACY,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,MAAM,CAACE,OAAO,CAACG,EAAE,CAAC;EACtE;EAEA,IAAIC,QAAQ,GAAG,CAAC,GAAGP,KAAK,CAACR,SAAS,CAAC,CAAC,CAAC;;EAErC,QAAQS,MAAM,CAACO,IAAI;IACf,KAAK,aAAa;IAClB,KAAK,QAAQ;MACT,IAAIN,KAAK,KAAK,CAAC,CAAC,EAAE;QACd;QACAK,QAAQ,CAACE,IAAI,CAAC;UAAE,GAAGR,MAAM,CAACE,OAAO;UAAEO,QAAQ,EAAE;QAAE,CAAC,CAAC;MAErD,CAAC,MAAM;QACH;QACAH,QAAQ,CAACL,KAAK,CAAC,CAACQ,QAAQ,EAAE;MAE9B;MACA;IAEJ,KAAK,kBAAkB;MACnB,IAAIR,KAAK,GAAG,CAAC,CAAC,EAAE;QACZ;QACAK,QAAQ,GAAGP,KAAK,CAACR,SAAS,CAACmB,MAAM,CAACN,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,MAAM,CAACE,OAAO,CAACG,EAAE,CAAC;MACtE;MACA;IAEJ,KAAK,QAAQ;MACT,IAAIJ,KAAK,GAAG,CAAC,CAAC,EAAE;QACZ;QACA,IAAIK,QAAQ,CAACL,KAAK,CAAC,CAACQ,QAAQ,IAAI,CAAC,EAAC;UAC9BH,QAAQ,CAACL,KAAK,CAAC,CAACQ,QAAQ,EAAE;QAC9B;MACJ;MACA;IAEJ,KAAK,YAAY;MACbH,QAAQ,GAAG,EAAE;MACb;IAEJ;MACI;EACR;EACAP,KAAK,CAACR,SAAS,GAAGe,QAAQ;EAC1BhB,OAAO,CAACS,KAAK,CAACR,SAAS,CAAC;EACxB,OAAOQ,KAAK;AAChB,CAAC;AAAAY,GAAA,GAhDYb,WAAW;AAAA,IAAAD,EAAA,EAAAc,GAAA;AAAAC,YAAA,CAAAf,EAAA;AAAAe,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}